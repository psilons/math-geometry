%! Package = PACKAGE_NAME
%! Author = Wonderland
%! Date = 10/23/2021

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{exercise}[2021/10/23 Exercise's Package]

\RequirePackage{fancyhdr}

\RequirePackage{tcolorbox}
\tcbuselibrary{most}

% 调色板
\RequirePackage{xcolor-material}

\newcommand{\exerheader}[4]{
    \fancypagestyle{pageheader}{% https://tex.stackexchange.com/questions/69950/fancyhdr-color-and-width-of-line
        \fancyhf{}% Clear all headers/footers

        \fancyhead[L]{\raisebox{-.5\baselineskip}[0pt][0pt]{#1}}% Header Centred
        \fancyhead[C]{\raisebox{-.5\baselineskip}[0pt][0pt]{\textbf{\Large {#2}}}}% Header Centred
        \fancyhead[R]{\raisebox{-.5\baselineskip}[0pt][0pt]{#3}}% Header Centred

        \renewcommand{\headrulewidth}{2pt}% 2pt header rule
        \renewcommand{\headrule}{\hbox to\headwidth{%
                \color{#4}\leaders\hrule height \headrulewidth\hfill}}

        \fancyfoot[C]{Page\hspace{1mm}\thepage}% Footer Centred
        \renewcommand{\footrulewidth}{0pt}% No footer rule
    }

    \pagestyle{pageheader}
}

%----------------------------------------------------------------------------------------
\newtcbtheorem[number within=section]{theorem}{Theorem}{
  enhanced, % without this, the title box won't show up
  fonttitle=\bfseries,
  boxrule=0.1mm,
  %before upper={\parindent2em}, % no indent
  colback=MaterialGreen50,
  colframe=MaterialGreen,
  attach boxed title to top left={xshift=12pt, yshift*=-\tcboxedtitleheight/2},
  boxed title style={colback=MaterialGreen}
}{theorem}

\newenvironment{theoremgreen}[2]{
    \begin{theorem}[adjusted title=#1]{}{#2}
    \textbf{Theorem \thetcbcounter.}
    }{\end{theorem}
}

\newtcbtheorem{problem}{Problem}{% https://tex.stackexchange.com/questions/198820/create-newshadetheorem-without-numbering
    theorem name,%
    colback=green!5,%
    colframe=green!35!black,%
    fonttitle=\bfseries,title after break={Problem  -- \raggedleft Continued}%
}{problem}

\newtcbtheorem[number within=chapter]{Theorem}{}{
        enhanced,
        %sharp corners,
        attach boxed title to top left={
            xshift=12pt,
            yshift=-\tcboxedtitleheight/2,
            %yshifttext=-1mm
        },
        top=1.5em,
        colback=white,
        colframe=blue!75!black,
        fonttitle=\bfseries,
        boxed title style={
            %sharp corners,
            %size=small,
            colback=blue!75!black,
            %colframe=blue!75!black,
        }
    }{thm}


\newenvironment{myTheorem}[2]{
    \begin{Theorem}[adjusted title=#1]{}{#2}
    \textbf{Theorem \thetcbcounter.}
    }{\end{Theorem}
}
